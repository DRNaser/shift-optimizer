{"openapi":"3.1.0","info":{"title":"SOLVEREIGN API","description":"Production-ready shift scheduling optimization API","version":"3.3.0"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Basic health check.\n\nReturns 200 if the service is running.\nUsed for Kubernetes liveness probes.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/health/ready":{"get":{"tags":["Health"],"summary":"Readiness Check","description":"Readiness check with dependency verification.\n\nChecks:\n- Database connection\n- (Future: Redis, external services)\n\nReturns 200 if ready to serve traffic.\nUsed for Kubernetes readiness probes.","operationId":"readiness_check_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadinessResponse"}}}}}}},"/health/live":{"get":{"tags":["Health"],"summary":"Liveness Check","description":"Simple liveness check.\n\nAlways returns 200 if the process is running.","operationId":"liveness_check_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/tenants/me":{"get":{"tags":["Tenants"],"summary":"Get Current Tenant Info","description":"Get current tenant information.\n\nReturns tenant details based on the API key used.","operationId":"get_current_tenant_info_api_v1_tenants_me_get","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tenants/me/stats":{"get":{"tags":["Tenants"],"summary":"Get Tenant Stats","description":"Get tenant usage statistics.\n\nIncludes:\n- Total forecasts and plans\n- Locked plans count\n- Last activity timestamps","operationId":"get_tenant_stats_api_v1_tenants_me_stats_get","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/forecasts":{"post":{"tags":["Forecasts"],"summary":"Ingest Forecast","description":"Ingest a new forecast.\n\nParses the raw text, validates tours, and creates:\n- forecast_version record\n- tours_raw records (parse results)\n- tours_normalized records (canonical tours)\n- tour_instances records (expanded templates)\n\nReturns forecast ID and parse status.","operationId":"ingest_forecast_api_v1_forecasts_post","parameters":[{"name":"X-Idempotency-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Idempotency-Key"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastIngestRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastIngestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Forecasts"],"summary":"List Forecasts","description":"List forecasts for tenant.\n\nSupports pagination and status filtering.","operationId":"list_forecasts_api_v1_forecasts_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Page Size"}},{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Filter"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/forecasts/{forecast_id}":{"get":{"tags":["Forecasts"],"summary":"Get Forecast Status","description":"Get detailed forecast status.\n\nReturns:\n- Parse status and tour counts\n- Associated plan information\n- Instance expansion status","operationId":"get_forecast_status_api_v1_forecasts__forecast_id__get","parameters":[{"name":"forecast_id","in":"path","required":true,"schema":{"type":"integer","title":"Forecast Id"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForecastStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/plans/solve":{"post":{"tags":["Plans"],"summary":"Solve Forecast","description":"Solve a forecast and create a new plan.\n\nUses advisory locks to prevent concurrent solves of the same forecast.\nReturns solver results including KPIs and optional audit results.","operationId":"solve_forecast_api_v1_plans_solve_post","parameters":[{"name":"X-Idempotency-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Idempotency-Key"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SolveRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SolveResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/plans/{plan_id}":{"get":{"tags":["Plans"],"summary":"Get Plan Status","description":"Get detailed plan status.","operationId":"get_plan_status_api_v1_plans__plan_id__get","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlanStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/plans/{plan_id}/kpis":{"get":{"tags":["Plans"],"summary":"Get Plan Kpis","description":"Get plan KPIs.","operationId":"get_plan_kpis_api_v1_plans__plan_id__kpis_get","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PlanKPIsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/plans/{plan_id}/audit":{"get":{"tags":["Plans"],"summary":"Get Plan Audit","description":"Get audit results for a plan.","operationId":"get_plan_audit_api_v1_plans__plan_id__audit_get","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/plans/{plan_id}/lock":{"post":{"tags":["Plans"],"summary":"Lock Plan","description":"Lock a plan for production release.\n\nRequirements:\n- Plan must be in DRAFT status\n- All audit checks must pass","operationId":"lock_plan_api_v1_plans__plan_id__lock_post","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LockRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LockResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/plans/{plan_id}/export/{format}":{"get":{"tags":["Plans"],"summary":"Export Plan","description":"Export plan in specified format.\n\nSupported formats:\n- csv: Roster matrix CSV\n- json: Full plan JSON\n- proof: Proof pack ZIP","operationId":"export_plan_api_v1_plans__plan_id__export__format__get","parameters":[{"name":"plan_id","in":"path","required":true,"schema":{"type":"integer","title":"Plan Id"}},{"name":"format","in":"path","required":true,"schema":{"type":"string","title":"Format"}},{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/simulations/scenarios":{"get":{"tags":["Simulations"],"summary":"List Scenarios","description":"List all available simulation scenarios.\n\nReturns scenario types with descriptions and required parameters.","operationId":"list_scenarios_api_v1_simulations_scenarios_get","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScenariosListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/simulations/run":{"post":{"tags":["Simulations"],"summary":"Run Simulation Endpoint","description":"Run a simulation scenario.\n\nSupported scenario types:\n- **cost_curve**: Analyze cost of each rule in drivers\n- **max_hours_policy**: Compare 55h vs 52h vs 50h caps\n- **freeze_tradeoff**: Compare freeze windows\n- **sick_call**: Simulate driver absences (requires num_drivers_out)\n- **tour_cancel**: Simulate tour cancellations (requires num_tours_cancelled)\n- **patch_chaos**: Simulate partial forecast (requires partial_days, patch_days)\n- **driver_friendly**: Analyze 3er gap quality costs\n- **headcount_cap**: Find constraint relaxations for budget (requires target_drivers)","operationId":"run_simulation_endpoint_api_v1_simulations_run_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimulationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/simulations/compare":{"post":{"tags":["Simulations"],"summary":"Compare Simulations","description":"Run multiple simulations and compare results.\n\nReturns ranked comparison of all scenarios.","operationId":"compare_simulations_api_v1_simulations_compare_post","parameters":[{"name":"X-API-Key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SimulationRequest"},"title":"Scenarios"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AuditCheckResult":{"properties":{"check_name":{"type":"string","title":"Check Name"},"status":{"type":"string","title":"Status"},"violation_count":{"type":"integer","title":"Violation Count"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"}},"type":"object","required":["check_name","status","violation_count"],"title":"AuditCheckResult","description":"Single audit check result."},"AuditResponse":{"properties":{"plan_version_id":{"type":"integer","title":"Plan Version Id"},"all_passed":{"type":"boolean","title":"All Passed"},"checks_run":{"type":"integer","title":"Checks Run"},"checks_passed":{"type":"integer","title":"Checks Passed"},"checks_failed":{"type":"integer","title":"Checks Failed"},"results":{"items":{"$ref":"#/components/schemas/AuditCheckResult"},"type":"array","title":"Results"}},"type":"object","required":["plan_version_id","all_passed","checks_run","checks_passed","checks_failed","results"],"title":"AuditResponse","description":"Full audit results."},"ChurnMetricsResponse":{"properties":{"unchanged":{"type":"integer","title":"Unchanged","default":0},"added":{"type":"integer","title":"Added","default":0},"removed":{"type":"integer","title":"Removed","default":0},"changed":{"type":"integer","title":"Changed","default":0},"churn_rate":{"type":"number","title":"Churn Rate","default":0.0},"affected_drivers":{"type":"integer","title":"Affected Drivers","default":0},"affected_tours":{"type":"integer","title":"Affected Tours","default":0}},"type":"object","title":"ChurnMetricsResponse","description":"Churn metrics."},"ForecastIngestRequest":{"properties":{"raw_text":{"type":"string","minLength":1,"title":"Raw Text","description":"Raw forecast text (tour lines)"},"source":{"type":"string","title":"Source","description":"Source of forecast (api, slack, csv)","default":"api"},"week_anchor_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Week Anchor Date","description":"Monday of the forecast week"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional notes"}},"type":"object","required":["raw_text"],"title":"ForecastIngestRequest","description":"Request to ingest a new forecast."},"ForecastIngestResponse":{"properties":{"forecast_version_id":{"type":"integer","title":"Forecast Version Id"},"status":{"type":"string","title":"Status"},"input_hash":{"type":"string","title":"Input Hash"},"tours_count":{"type":"integer","title":"Tours Count"},"instances_count":{"type":"integer","title":"Instances Count"},"parse_errors_count":{"type":"integer","title":"Parse Errors Count"},"parse_warnings_count":{"type":"integer","title":"Parse Warnings Count"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"message":{"type":"string","title":"Message"}},"type":"object","required":["forecast_version_id","status","input_hash","tours_count","instances_count","parse_errors_count","parse_warnings_count","created_at","message"],"title":"ForecastIngestResponse","description":"Response after ingesting a forecast."},"ForecastListItem":{"properties":{"id":{"type":"integer","title":"Id"},"status":{"type":"string","title":"Status"},"source":{"type":"string","title":"Source"},"tours_count":{"type":"integer","title":"Tours Count"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"has_locked_plan":{"type":"boolean","title":"Has Locked Plan"}},"type":"object","required":["id","status","source","tours_count","created_at","has_locked_plan"],"title":"ForecastListItem","description":"Forecast list item."},"ForecastListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/ForecastListItem"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"}},"type":"object","required":["items","total","page","page_size"],"title":"ForecastListResponse","description":"Paginated forecast list."},"ForecastStatusResponse":{"properties":{"id":{"type":"integer","title":"Id"},"status":{"type":"string","title":"Status"},"source":{"type":"string","title":"Source"},"input_hash":{"type":"string","title":"Input Hash"},"week_anchor_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Week Anchor Date"},"tours_count":{"type":"integer","title":"Tours Count"},"instances_count":{"type":"integer","title":"Instances Count"},"plans_count":{"type":"integer","title":"Plans Count"},"latest_plan_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Latest Plan Status"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["id","status","source","input_hash","week_anchor_date","tours_count","instances_count","plans_count","latest_plan_status","created_at","notes"],"title":"ForecastStatusResponse","description":"Detailed forecast status."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"version":{"type":"string","title":"Version"},"timestamp":{"type":"string","title":"Timestamp"},"environment":{"type":"string","title":"Environment"}},"type":"object","required":["status","version","timestamp","environment"],"title":"HealthResponse","description":"Health check response."},"KPIsResponse":{"properties":{"total_drivers":{"type":"integer","title":"Total Drivers","default":0},"fte_drivers":{"type":"integer","title":"Fte Drivers","default":0},"pt_drivers":{"type":"integer","title":"Pt Drivers","default":0},"pt_ratio":{"type":"number","title":"Pt Ratio","default":0.0},"total_tours":{"type":"integer","title":"Total Tours","default":0},"coverage":{"type":"number","title":"Coverage","default":1.0}},"type":"object","title":"KPIsResponse","description":"KPI snapshot."},"LockRequest":{"properties":{"locked_by":{"type":"string","minLength":1,"title":"Locked By","description":"User or system locking the plan"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional lock notes"}},"type":"object","required":["locked_by"],"title":"LockRequest","description":"Request to lock a plan."},"LockResponse":{"properties":{"plan_version_id":{"type":"integer","title":"Plan Version Id"},"status":{"type":"string","title":"Status"},"locked_at":{"type":"string","format":"date-time","title":"Locked At"},"locked_by":{"type":"string","title":"Locked By"},"message":{"type":"string","title":"Message"}},"type":"object","required":["plan_version_id","status","locked_at","locked_by","message"],"title":"LockResponse","description":"Response after locking."},"PlanKPIsResponse":{"properties":{"plan_version_id":{"type":"integer","title":"Plan Version Id"},"total_drivers":{"type":"integer","title":"Total Drivers"},"fte_drivers":{"type":"integer","title":"Fte Drivers"},"pt_drivers":{"type":"integer","title":"Pt Drivers"},"pt_ratio":{"type":"number","title":"Pt Ratio"},"total_tours":{"type":"integer","title":"Total Tours"},"coverage_pct":{"type":"number","title":"Coverage Pct"},"block_1er":{"type":"integer","title":"Block 1Er"},"block_2er_reg":{"type":"integer","title":"Block 2Er Reg"},"block_2er_split":{"type":"integer","title":"Block 2Er Split"},"block_3er":{"type":"integer","title":"Block 3Er"},"avg_weekly_hours":{"type":"number","title":"Avg Weekly Hours"},"max_weekly_hours":{"type":"number","title":"Max Weekly Hours"},"min_weekly_hours":{"type":"number","title":"Min Weekly Hours"}},"type":"object","required":["plan_version_id","total_drivers","fte_drivers","pt_drivers","pt_ratio","total_tours","coverage_pct","block_1er","block_2er_reg","block_2er_split","block_3er","avg_weekly_hours","max_weekly_hours","min_weekly_hours"],"title":"PlanKPIsResponse","description":"Plan KPIs."},"PlanStatusResponse":{"properties":{"id":{"type":"integer","title":"Id"},"status":{"type":"string","title":"Status"},"forecast_version_id":{"type":"integer","title":"Forecast Version Id"},"seed":{"type":"integer","title":"Seed"},"output_hash":{"type":"string","title":"Output Hash"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"},"locked_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Locked At"},"locked_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locked By"},"audit_passed_count":{"type":"integer","title":"Audit Passed Count"},"audit_failed_count":{"type":"integer","title":"Audit Failed Count"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["id","status","forecast_version_id","seed","output_hash","created_at","started_at","completed_at","locked_at","locked_by","audit_passed_count","audit_failed_count","error_message"],"title":"PlanStatusResponse","description":"Detailed plan status."},"ReadinessResponse":{"properties":{"status":{"type":"string","title":"Status"},"checks":{"additionalProperties":{"type":"string"},"type":"object","title":"Checks"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["status","checks","timestamp"],"title":"ReadinessResponse","description":"Readiness check response with component status."},"ScenarioInfo":{"properties":{"type":{"type":"string","title":"Type"},"category":{"type":"string","title":"Category"},"name_de":{"type":"string","title":"Name De"},"description":{"type":"string","title":"Description"},"description_de":{"type":"string","title":"Description De"},"required_params":{"items":{"type":"string"},"type":"array","title":"Required Params"}},"type":"object","required":["type","category","name_de","description","description_de","required_params"],"title":"ScenarioInfo","description":"Information about a simulation scenario type."},"ScenariosListResponse":{"properties":{"scenarios":{"items":{"$ref":"#/components/schemas/ScenarioInfo"},"type":"array","title":"Scenarios"}},"type":"object","required":["scenarios"],"title":"ScenariosListResponse","description":"List of available scenarios."},"SimulationRequest":{"properties":{"scenario_type":{"type":"string","title":"Scenario Type","description":"Type of scenario: cost_curve, max_hours_policy, freeze_tradeoff, sick_call, tour_cancel, patch_chaos, driver_friendly, headcount_cap"},"name":{"type":"string","title":"Name","description":"Display name for this simulation","default":"Simulation"},"parameters":{"additionalProperties":true,"type":"object","title":"Parameters","description":"Scenario-specific parameters"},"baseline_plan_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Baseline Plan Id","description":"Plan to use as baseline (optional)"}},"type":"object","required":["scenario_type"],"title":"SimulationRequest","description":"Request to run a simulation scenario."},"SimulationResponse":{"properties":{"scenario_type":{"type":"string","title":"Scenario Type"},"scenario_name":{"type":"string","title":"Scenario Name"},"baseline_kpis":{"$ref":"#/components/schemas/KPIsResponse"},"simulated_kpis":{"$ref":"#/components/schemas/KPIsResponse"},"delta":{"additionalProperties":true,"type":"object","title":"Delta"},"churn_metrics":{"$ref":"#/components/schemas/ChurnMetricsResponse"},"risk_score":{"type":"string","title":"Risk Score"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations"},"execution_time_ms":{"type":"integer","title":"Execution Time Ms"},"details":{"additionalProperties":true,"type":"object","title":"Details"}},"type":"object","required":["scenario_type","scenario_name","baseline_kpis","simulated_kpis","delta","churn_metrics","risk_score","recommendations","execution_time_ms"],"title":"SimulationResponse","description":"Response from a simulation run."},"SolveRequest":{"properties":{"forecast_version_id":{"type":"integer","title":"Forecast Version Id","description":"Forecast to solve"},"seed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Seed","description":"Solver seed for reproducibility","default":94},"run_audit":{"type":"boolean","title":"Run Audit","description":"Run audit checks after solving","default":true}},"type":"object","required":["forecast_version_id"],"title":"SolveRequest","description":"Request to solve a forecast."},"SolveResponse":{"properties":{"plan_version_id":{"type":"integer","title":"Plan Version Id"},"status":{"type":"string","title":"Status"},"forecast_version_id":{"type":"integer","title":"Forecast Version Id"},"seed":{"type":"integer","title":"Seed"},"output_hash":{"type":"string","title":"Output Hash"},"total_drivers":{"type":"integer","title":"Total Drivers"},"total_tours":{"type":"integer","title":"Total Tours"},"coverage_pct":{"type":"number","title":"Coverage Pct"},"pt_ratio":{"type":"number","title":"Pt Ratio"},"max_weekly_hours":{"type":"number","title":"Max Weekly Hours"},"audit_passed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Audit Passed"},"audit_checks_run":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Audit Checks Run"},"audit_checks_passed":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Audit Checks Passed"},"duration_seconds":{"type":"number","title":"Duration Seconds"},"message":{"type":"string","title":"Message"}},"type":"object","required":["plan_version_id","status","forecast_version_id","seed","output_hash","total_drivers","total_tours","coverage_pct","pt_ratio","max_weekly_hours","duration_seconds","message"],"title":"SolveResponse","description":"Response after solving."},"TenantResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["id","name","is_active","created_at"],"title":"TenantResponse","description":"Tenant information response."},"TenantStatsResponse":{"properties":{"tenant_id":{"type":"integer","title":"Tenant Id"},"tenant_name":{"type":"string","title":"Tenant Name"},"forecasts_count":{"type":"integer","title":"Forecasts Count"},"plans_count":{"type":"integer","title":"Plans Count"},"locked_plans_count":{"type":"integer","title":"Locked Plans Count"},"last_forecast_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Forecast At"},"last_solve_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Solve At"}},"type":"object","required":["tenant_id","tenant_name","forecasts_count","plans_count","locked_plans_count"],"title":"TenantStatsResponse","description":"Tenant statistics response."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}